# 第2章：データと型（変数・キャスト・参照型）

プログラミングでは、データを保存する箱のことを **「変数（へんすう）」** と呼びます。

Javaは、この箱の種類（ **型** ）にとても厳しい言語です。

## はじめに：プログラミングとは？（心構え）

プログラミングとは、コンピュータへの「お願い（命令）」を書くことです。

ただし、コンピュータは人間のように「空気を読む」ことができません。

**一言一句、正確に命令しないと動きません。**

* **= は「等しい」ではない**

    プログラミングで使う **=** は、数学の「イコール」とは全く別物です。

    「代入（右のものを左に入れる）」という意味です。

* **エラーは友達**

    赤い文字のエラーが出ても、落ち込む必要はありません。

    「ここが分からないよ」というコンピュータからの返事です。

---

## 1. 「型」ってなに？

「型（Type）」とは、**データの形** のことです。

変数は「箱」ですが、Javaでは中に入れるものに合わせて、箱の形を最初に決める必要があります。

* 整数を入れるための箱
* 整数を入れるためであり、文字列などから数値へ変換する機能を有する箱
* 文字を入れるための箱
* 文字列を入れるためであり、文字列の置換／文字列を部分的に取り出す機能を有する箱
* 小数を入れるための箱
* 真偽値を入れるための箱
* etc....

違う形の箱に無理やりデータを詰め込もうとすると、Javaはエラーを出して止めてくれます。

---

## 2. プリミティブ型（基本データ型）

Javaで扱う最小単位のデータを「プリミティブ型」と呼びます。
全部で8種類ありますが、役割ごとに分類すると覚えやすいです。

### よく使う主要な4つ

まずはこの4つを完璧に覚えましょう。

| カテゴリ | 型の名前 | 意味 | 例 |
| :--- | :--- | :--- | :--- |
| **整数** | **int** | 基本的な整数 | **10**, **-500** |
| **小数** | **double** | 基本的な小数 | **3.14**, **0.05** |
| **文字** | **char** | **1文字**だけ | **'A'**, **'あ'** (シングルクォートを使う) |
| **判定** | **boolean** | 真か偽か | **true** (〇), **false** (×) |

### その他のプリミティブ型

扱うデータの大きさ（メモリサイズ）によって使い分けます。
[Oracle公式ドキュメント(dev.java)](https://dev.java/learn/language-basics/primitive-types/) も参考にしてください。

| 型の名前 | 特徴 |
| :--- | :--- |
| **byte** | とても小さい整数 (-128 ~ 127) |
| **short** | 小さい整数 (-32,768 ~ 32,767) |
| **long** | **とても大きい整数** (WebサービスでIDなどを扱うときによく使う) |
| **float** | 小さい小数（末尾に **f** をつける必要があるため、入門では **double** が楽です） |

---

## 3. 計算とキャスト（Calc.java）

**Calc.java** を実行して、計算のルールを確認しましょう。

### 割り算の罠

**5 / 2** の結果が **2.5** ではなく **2** になりませんでしたか？

* **原因:** 「整数(int)」÷「整数(int)」の答えは、Javaでは「整数（あまり切り捨て）」になるルールだからです。
* **解決策:** **(double)** という「キャスト（型変換）」を使って、「一時的に実数として計算して！」と指示します。

```java
(double) 5 / 2  →  2.5 になる！
```

### 型の不一致エラーと解決

Javaでは、「大きなデータ(doubleなど)」を「小さな箱(int)」に入れようとするとエラーになります。

```java
int result = price * tax; // エラー！
```

* **price * tax (1000 * 0.1)** の答えは **100.0** (double型) です。
* これを **int** 型の変数に入れるには、**(int)** と書いて「小数点以下が消えてもいいから、無理やり入れて！」と命令（キャスト）する必要があります。

## 4. プリミティブ型と参照型（ReferenceDemo.java）

Javaのデータには、プリミティブ型以外に 「参照型（さんしょうがた）」 があります。

代表的なのが、文字列を扱う **String** です。

| 特徴 | プリミティブ型 | 参照型 |
| --- | --- | --- |
| 名前 | 小文字 (int, char など) | 大文字 (String など) |
| 中身 | データそのもの | データの「場所情報」 |
| 機能 | なし（ただの数値） | 便利な機能（メソッド）を持っている |

### 参照型を使ってみよう

**ReferenceDemo.java** を実行してみましょう。 **String** 型の変数だけ、 **.length()**（長さを測る）などの便利な機能が使えることが確認できます。

#### 覚え方

* char (プリミティブ): **'A'** (シングルクォート)。ただの文字データ。1文字のみ。
* String (参照型): **"ABC"** (ダブルクォート)。高機能なオブジェクト。文字の並び。

## 第2章のまとめ

* 型: 箱の形。データに合わせて int や double などを使い分ける。
* キャスト: 型を変換すること。計算の精度を制御したり、エラーを解決するために使う。
* 変数の更新: x = x + 1 は「xに1を足して、xに入れ直す」という意味。
