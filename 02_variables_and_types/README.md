# 第2章：データと型（変数・キャスト・参照型）

プログラミングでは、データを保存する箱のことを **「変数（へんすう）」** と呼びます。

Javaは、この箱の種類（ **型** ）にとても厳しい言語です。

## はじめに：プログラミングとは？（心構え）

プログラミングとは、コンピュータへの「お願い（命令）」を書くことです。

ただし、コンピュータは人間のように「空気を読む」ことができません。

**一言一句、正確に命令しないと動きません。**

* **= は「等しい」ではない**

    プログラミングで使う `=` は、数学の「イコール」とは全く別物です。

    「代入（右のものを左に入れる）」という意味です。

* **エラーは友達**

    赤い文字のエラーが出ても、落ち込む必要はありません。

    「ここが分からないよ」というコンピュータからの返事です。

## 1. プリミティブ型とキャスト（Calc.java）

Javaの基本的なデータの型（プリミティブ型）は、主に以下の3つを覚えればOKです。

全て **小文字** で始まるのが特徴です。

| 型の名前 | 入るデータ | 例 |
| :--- | :--- | :--- |
| `int` | 整数 | `10`, `-500` |
| `double` | 実数（小数） | `3.14`, `0.5` |
| `boolean` | 真偽値 | `true` (〇), `false` (×) |

※ これ以外にもプリミティブ型は存在します。[dev.java](https://dev.java/learn/language-basics/primitive-types/) を参照して他のプリミティブ型を確認してください。

### 割り算の罠とキャスト

`Calc.java` を実行してみてください。

`5 / 2` の結果が `2.5` ではなく `2` になりませんでしたか？

- **原因:** 「整数」÷「整数」の答えは、Javaでは「整数（あまり切り捨て）」になるルールだからです。
- **解決策:** `(double)` という「キャスト（型変換）」を使って、「一時的に実数として計算して！」と指示します。

```java
(double) 5 / 2  →  2.5 になる！
```

## 2. 型の不一致エラー

Javaでは、「大きなデータ」を「小さな箱」に入れようとするとエラーになります。

Calc.java の後半にあるコメントを外して確認してみましょう。

```java
int result = price * tax; // エラー！
```

- `price * tax (1000 * 0.1)` の答えは `100.0` (double型) です。
- これを `int` 型の変数に入れようとすると、「小数点以下のデータが消えちゃうけどいいの？」とJavaが怒ります。
- `(int)` と書いて「消えてもいいから無理やり入れて！」と命令（キャスト）することで解決できます。

## 3. プリミティブ型と参照型（ReferenceDemo.java）

Javaのデータには、もう一種類 「参照型（さんしょうがた）」 があります。 代表的なのが、文字を扱う `String` です。

| 特徴 | プリミティブ型 | 参照型 |
| -- | -- | -- |
| 名前 | 小文字 (int, double) | 大文字 (String など) |
| 中身 | データそのもの | データの「場所情報」 |
| 機能 | なし（ただの数値） | 便利な機能（メソッド）を持っている |

### 参照型を使ってみよう

`ReferenceDemo.java` を実行してみましょう。

`String` 型の変数だけ、 `.length()`（長さを測る）や `.toUpperCase()`（大文字にする）といった便利な機能が使えることが確認できます。

- イメージ
  - プリミティブ型: ただの「数字が書かれたメモ」
  - 参照型: 高機能な「リモコン」。リモコンのボタン（メソッド）を押すと、データに対して色々な操作ができます。

## 第2章のまとめ

- 型（型）: Javaはデータの種類に厳しい。
- キャスト: 型を変換するときに使う。特に割り算や、異なる型同士の計算で重要。
  - プリミティブ型 vs 参照型:
  - 小文字 (char) は単純なデータ。
  - 大文字 (String) は機能を持った「オブジェクト」への参照。
